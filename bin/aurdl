#!/bin/zsh
#
# Supposed to be a VERY simple aur-download-script...
# TODO: search function (maybe..)

usage() {
  echo "Usage: aurdl [name]"
  echo
  echo "     no option            - download to the working directory"
  echo "     -d | --destination   - download to a specific directory"
  echo
  echo "     For example:           aurdl packagename"
  echo "                            aurdl -d /path/to/dir packagename"
  exit
}

download() {
  wget -nv http://aur.archlinux.org/packages/$pacname/$pacname.tar.gz || return 1
}

case "$1" in
  '-d'|'--destination')
    pacname=$3
    destdir=$2
    cd $destdir && download $pacname
    echo "Package succesfully saved as $pacname.tar.gz in $destdir!"
  ;;
  *)
    if [ -z "$1" ] ; then
      usage
    else 
      pacname=$1
      download $pacname
      echo "Package succesfully saved as $pacname.tar.gz!"
    fi
  ;;
esac
