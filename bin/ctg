#!/usr/bin/env ruby
# Author: Gigamo <gigamo@gmail.com>
# Simple script for moving config files over to local git repo
SRCDIR = ENV["HOME"]
GITDIR = "#{SRCDIR}/gitconfig/config"
#EDITOR = ENV["EDITOR"] # Uncomment this if you want to use your $EDITOR
EDITOR = "tvim"
SRCFILE = ARGV[0]

def usage
  puts "No file specified! Usage: ctg [file]\n    For example:    ctg bin/ctg\n                    will copy bin/ctg to #{GITDIR}/bin/ctg"
  exit 0
end

def ctg
  if ARGV[0] == ".amazing/config.yml" or ARGV[0] == ".irssi/config" or ARGV[0] == "bin/screenshot"
    puts "\nCopying #{SRCFILE} to #{GITDIR} - You'll have to add this one to GIT manually\n\n"
    `cp -r #{SRCDIR}/#{SRCFILE} #{GITDIR}/#{SRCFILE} && #{EDITOR} #{GITDIR}/#{SRCFILE}`
  else
    puts "\nCopying #{SRCFILE} to #{GITDIR} and adding it to GIT\n\n"
    `cp -r #{SRCDIR}/#{SRCFILE} #{GITDIR}/#{SRCFILE} && cd #{GITDIR} && git add #{GITDIR}/#{SRCFILE}`
  end
end

if ARGV.empty?
  usage
else
  ctg
  exit 0
end
