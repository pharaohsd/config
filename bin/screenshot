#!/bin/bash
#
# (c) Gigamo 2008
#
# Wrote this because I'm too lazy to upload a screenshot to ftp
# manually all the time :P
#
Usage() {
  echo "usage: screenshot [name]"
  echo
  echo "     poopoo       - would scrot a screenshot called poopoo.png"
  echo "     -h | --help  - display this :)"
  exit
}

link() {
  echo "Link to uploaded picture and thumbnail:"
  echo
  echo "http://$ftphost/$ftpuser/$ftppath/${picname}.png"
  echo "http://$ftphost/$ftpuser/$ftppath/${picname}t.png"
}
printscreen() {
  `cd ~/screenshots && scrot ${picname}.png && cp ${picname}.png ${picname}t.png && mogrify -resize 25% ${picname}t.png`
}
upload() {
  ftphost=""
  ftpuser="" # Probably only required for my isp's FTP
  ftppath=""
  ftplogin=""
  ftppass=""
  `ncftpput -u $ftplogin -p $ftppass -R -m $ftphost $ftppath $pic $thumb`
}

case "$1" in
  '-h'|'--help')
    usage
    ;;
  *)
    if [ -z "$1" ] ; then
      echo "No filename specified! See --help"
      exit 1
    else 
      picname=$1
      pic=~/screenshots/${picname}.png
      thumb=~/screenshots/${picname}t.png
      printscreen
      upload
      link
    fi
    ;;
esac
