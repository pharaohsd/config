#!/bin/bash
#
# (c) Gigamo 2008
#
# Wrote this because I'm too lazy to upload a screenshot to ftp
# manually all the time :P

ftphost="users.telenet.be"
ftpuser="gigamo" # Probably only required for my isp's FTP
ftppath="pics"
ftplogin="t363435"
ftppass="diablo1"

usage() {
  echo "usage: screenshot [name]"
  echo
  echo "     test         - would scrot a screenshot called test.png"
  echo "     -h | --help  - display this :)"
  echo
  exit
}

link() {
  echo "Link to uploaded picture and thumbnail:";
  echo
  echo "http://$ftphost/$ftpuser/$ftppath/${picname}.png";
  echo "http://$ftphost/$ftpuser/$ftppath/${picname}t.png";
  echo
}

printscreen() {
  `cd ~/screenshots && scrot ${picname}.png`
  `cd ~/screenshots && cp ${picname}.png ${picname}t.png`
  `cd ~/screenshots && mogrify -resize 25% ${picname}t.png`
}

upload() {
  `ncftpput -u $ftplogin -p $ftppass -R -m $ftphost $ftppath $pic $thumb`
}

if [ -z "$1" ] ; then
  echo "No screenshotname specified! See screenshot --help"
  exit 1
fi

case "$1" in
  '-h'|'--help')
    usage
    ;;
  *) 
    picname=$1
    ;;
esac

pic=~/screenshots/${picname}.png
thumb=~/screenshots/${picname}t.png

printscreen
upload
link
